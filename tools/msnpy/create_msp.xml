<tool id="msnpy-create-msp" name="msnpy create_msp" version="1.0">
  <description>Create an MSP file</description>
  <macros>
        <import>macros.xml</import>
  </macros>
  <expand macro="requirements" />
  <stdio>
    <exit_code level="fatal" range="1:"/>
  </stdio>
  <version_command>python msnpy annotate-spectral-trees --version</version_command>
  <command><![CDATA[
      python msnpy_create_mspy

]]></command>
  <inputs>
    <param name="peaklists" type="data" format="h5" label="HDF5 file (Peaklist objects) from step 'process-scans'." argument="--peaklists" >
      <validator type="empty_field" />
    </param>
    <param name="annotations" type="data" format="json" label="Annotated spectral trees" help="Json that includes molecular formula annotations for the spectra" argument="--annotated_trees">
      <validator type="empty_field" />
    </param>

    <param name="msp_type" type="select" label="MSP file type?"  argument="--msp_type">
      <option value="generic_msp">Generic MSP format</option>
      <option value="massbank" selected="true">European MassBank format</option>
    </param>

    <conditional name="dimspy_usage">
      <param argument="--merge_ms2_ms3" checked="false" label="" name="rules" type="boolean" truevalue="--merge_ms2_ms3" falsevalue=""/>
        <when value="--merge_ms2_ms3">
          <param argument="--ppm" label="Mass tolerance in Parts per million." name="ppm" optional="true" type="float" value="5.0"/>
        </when>
        <when value="false">
        </when>
    </conditional>


  </inputs>
  <outputs>
        <data format="msp" hidden="false" name="msp" label="${tool.name} on ${on_string}: MSP"/>
  </outputs>
  <tests>
    <test>
    </test>
  </tests>

  <help>
Create MSP file of spectra
==========================================================================

Description
----------------




  </help>
</tool>